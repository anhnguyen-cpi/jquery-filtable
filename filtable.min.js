(function(e){var g=["odd","even"],h=[],k={text:{selector:'input[type="text"]',event:"keyup"},select:{selector:"select",event:"change"},checkbox:{selector:'input[type="checkbox"]',event:"click"}},c={init:function(a){a=e.extend({controlPanel:null,handleSort:!0},a);var b=e(this);return this.each(function(){for(var d in k)e(k[d].selector,a.controlPanel).each(function(){var a=d,f=e(this);h.push(f);f.on(k[a].event,function(){"select"===a&&c.updateFilterHash(f.data("filter-hash"),f.val());c.createAndRunFilters(b)})});
e(window).on("hashchange",function(){c.applyHashFilters(a.controlPanel);c.createAndRunFilters(b)});c.applyHashFilters(a.controlPanel);c.createAndRunFilters(b)})},filter:function(a){a=e.extend({filters:[],handleSort:!0},a);return this.each(function(){var b=e(this);b.trigger("beforetablefilter");if(a.handleSort)b.on("aftertablesort",function(a,p){c.handleRowsThenStripe(b,function(a){return!a.hasClass("hidden")})});setTimeout(function(){c.handleRowsThenStripe(b,function(d){for(var b=0,f=a.filters.length;b<
f;b++){for(var c=a.filters[b].columns,e=a.filters[b].value.toString().toLowerCase(),h=!1,k=0,g=c.length;k<g;k++){var m=d.find("td").eq(c[k]),n=m.data("filter-val");0<=(void 0===n?m.text():n).toString().toLowerCase().indexOf(e)&&(h=!0)}if(!h)return!1}return!0});b.trigger("aftertablefilter")},10)})},handleRowsThenStripe:function(a,b){var d=0,c=a.find("> tbody");c.each(function(){var a=c.clone();a.find("> tr").each(function(){var a=e(this),c=b(a);a.removeClass(g.join(" "));c?(a.removeClass("hidden"),
a.addClass(g[d]),d=1-d):a.addClass("hidden")});c.replaceWith(a)})},createAndRunFilters:function(a){for(var b=[],d=0,e=h.length;d<e;d++){var f=h[d],g=f.data("filter-col");if(void 0!==g){g=g.toString().split(",");var l="";h[d].is(k.checkbox.selector)?h[d].is(":checked")&&(l=f.data("filter-val")):l=f.val();b.push({columns:g,value:l})}}c.filter.apply(a,[{filters:b}])},parseFilterHash:function(){var a=window.location.hash.replace("#","");if(0===a.length)return{};var b={};a=a.split("&");for(var d in a){var c=
a[d].split("=");2===c.length&&(b[c[0]]=c[1])}return b},applyHashFilters:function(a){var b=c.parseFilterHash(),d;for(d in b)e('[data-filter-hash="'+d+'"]',a).val(b[d])},updateFilterHash:function(a,b){var d=c.parseFilterHash();d[a]=b;var e="#",f;for(f in d)0!==d[f].length&&("#"!==e&&(e+="&"),e+=f+"="+d[f]);window.history.replaceState(void 0,void 0,e)}};e.fn.filtable=function(a){if("filter"===a)return c.filter.apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Unknown method `"+
a+"` on jQuery.filtable");else return c.init.apply(this,arguments)}})(jQuery);
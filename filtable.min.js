(function(d){var g=["odd","even"],h=[],l={text:{selector:'input[type="text"]',event:"keyup"},select:{selector:"select",event:"change"},checkbox:{selector:'input[type="checkbox"]',event:"click"}},f={init:function(a){a=d.extend({controlPanel:null,handleSort:!0},a);var e=d(this);return this.each(function(){var c=window.location.hash.replace("#!","");if(0<c.length){var c=c.split("&"),b;for(b in c){var m=c[b].split("=");d('[data-filter-hash="'+m[0]+'"]',a.controlPanel).val(m[1])}}for(b in l)d(l[b].selector,
a.controlPanel).each(function(){var a=d(this);h.push(a);a.on(l[b].event,function(){f.createAndRunFilters(e)})});f.createAndRunFilters(e)})},filter:function(a){a=d.extend({filters:[],handleSort:!0},a);return this.each(function(){var e=d(this);e.trigger("beforetablefilter");if(a.handleSort)e.on("aftertablesort",function(a,b){f.handleRowsThenStripe(e,function(a){return!a.hasClass("hidden")})});setTimeout(function(){f.handleRowsThenStripe(e,function(c){for(var b=0,e=a.filters.length;b<e;b++){for(var k=
a.filters[b].columns,d=a.filters[b].value.toString().toLowerCase(),f=!1,h=0,l=k.length;h<l;h++){var g=c.find("td").eq(k[h]),n=g.data("filter-val");0<=(void 0===n?g.text():n).toString().toLowerCase().indexOf(d)&&(f=!0)}if(!f)return!1}return!0});e.trigger("aftertablefilter")},10)})},handleRowsThenStripe:function(a,e){var c=0,b=a.find("> tbody");b.each(function(){var a=b.clone();a.find("> tr").each(function(){var a=d(this),b=e(a);a.removeClass(g.join(" "));b?(a.removeClass("hidden"),a.addClass(g[c]),
c=1-c):a.addClass("hidden")});b.replaceWith(a)})},createAndRunFilters:function(a){for(var e=[],c=0,b=h.length;c<b;c++){var d=h[c],k=d.data("filter-col");if(void 0!==k){var k=k.toString().split(","),g="";h[c].is(l.checkbox.selector)?h[c].is(":checked")&&(g=d.data("filter-val")):g=d.val();e.push({columns:k,value:g})}}f.filter.apply(a,[{filters:e}])}};d.fn.filtable=function(a){if("filter"===a)return f.filter.apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)d.error("Unknown method `"+
a+"` on jQuery.filtable");else return f.init.apply(this,arguments)}})(jQuery);
(function(e){var g=["odd","even"],h=[],k={text:{selector:'input[type="text"]',event:"keyup"},select:{selector:"select",event:"change"},checkbox:{selector:'input[type="checkbox"]',event:"click"}},d={init:function(a){a=e.extend({controlPanel:null,handleSort:!0},a);var c=e(this);return this.each(function(){for(var b in k)e(k[b].selector,a.controlPanel).each(function(){var a=b,f=e(this);h.push(f);f.on(k[a].event,function(){if("select"===a){var b=f.data("filter-hash");b&&d.updateFilterHash(b,f.val())}d.createAndRunFilters(c)})});
e(window).on("hashchange",function(){d.applyHashFilters(a.controlPanel);d.createAndRunFilters(c)});d.applyHashFilters(a.controlPanel);d.createAndRunFilters(c)})},filter:function(a){a=e.extend({filters:[],handleSort:!0},a);return this.each(function(){var c=e(this);c.trigger("beforetablefilter");if(a.handleSort)c.on("aftertablesort",function(a,p){d.handleRowsThenStripe(c,function(a){return!a.hasClass("hidden")})});setTimeout(function(){d.handleRowsThenStripe(c,function(b){for(var c=0,f=a.filters.length;c<
f;c++){for(var d=a.filters[c].columns,e=a.filters[c].value.toString().toLowerCase(),h=!1,k=0,g=d.length;k<g;k++){var m=b.find("td").eq(d[k]),n=m.data("filter-val");0<=(void 0===n?m.text():n).toString().toLowerCase().indexOf(e)&&(h=!0)}if(!h)return!1}return!0});c.trigger("aftertablefilter")},10)})},handleRowsThenStripe:function(a,c){var b=0,d=a.find("> tbody");d.each(function(){var a=d.clone();a.find("> tr").each(function(){var a=e(this),d=c(a);a.removeClass(g.join(" "));d?(a.removeClass("hidden"),
a.addClass(g[b]),b=1-b):a.addClass("hidden")});d.replaceWith(a)})},createAndRunFilters:function(a){for(var c=[],b=0,e=h.length;b<e;b++){var f=h[b],g=f.data("filter-col");if(void 0!==g){g=g.toString().split(",");var l="";h[b].is(k.checkbox.selector)?h[b].is(":checked")&&(l=f.data("filter-val")):l=f.val();c.push({columns:g,value:l})}}d.filter.apply(a,[{filters:c}])},parseFilterHash:function(){var a=window.location.hash.replace("#","");if(0===a.length)return{};var c={};a=a.split("&");for(var b in a){var d=
a[b].split("=");2===d.length&&(c[d[0]]=d[1])}return c},applyHashFilters:function(a){var c=d.parseFilterHash(),b;for(b in c)e('[data-filter-hash="'+b+'"]',a).val(c[b])},updateFilterHash:function(a,c){var b=d.parseFilterHash();b[a]=c;var e="#",f;for(f in b)0!==b[f].length&&("#"!==e&&(e+="&"),e+=f+"="+b[f]);window.history.replaceState(void 0,void 0,e)}};e.fn.filtable=function(a){if("filter"===a)return d.filter.apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Unknown method `"+
a+"` on jQuery.filtable");else return d.init.apply(this,arguments)}})(jQuery);